5.1. Техническое задание на разработку программного модуля
ТЕХНИЧЕСКОЕ ЗАДАНИЕ

Система управления заявками на ремонт климатической техники

Общие сведения
Наименование: Информационная система управления заявками на ремонт климатического оборудования

Основание для разработки: Автоматизация процесса управления заявками на обслуживание и ремонт кондиционеров и климатической техники

Назначение: Обеспечение автоматизированного учета заявок на ремонт, распределения задач между мастерами, контроля статусов выполнения работ и формирования статистики

Требования к функциональности системы
Модуль аутентификации и авторизации:

Регистрация и вход пользователей с различными ролями (Оператор, Специалист, Менеджер, Менеджер по качеству, Заказчик)

Хеширование паролей с использованием Werkzeug

JWT-токены для управления сессиями пользователей

Middleware для проверки прав доступа к различным функциям системы

Модуль управления пользователями:

Просмотр списка пользователей с пагинацией

Создание новых пользователей системы (доступно Менеджеру)

Обновление данных пользователей (ФИО, телефон, тип пользователя)

Удаление пользователей из системы

Валидация уникальности логинов

Модуль управления заявками:

Создание заявок на ремонт с указанием типа и модели техники, описания проблемы

Автоматическое присвоение статуса "Новая заявка" и даты создания

Просмотр заявок с фильтрацией по статусу и поиском по ID

Назначение мастера на выполнение заявки (доступно Специалисту, Менеджеру, Менеджеру по качеству)

Обновление статуса заявки ("Новая заявка", "В работе", "Завершена")

Добавление информации о запчастях и дате завершения

Ограничение доступа Заказчиков только к собственным заявкам

Удаление заявок (доступно только Менеджеру)

Модуль статистики:

Подсчет завершенных заявок за указанный период

Расчет среднего времени выполнения заявки

Определение среднего количества заявок в работе

Анализ типов проблем с климатической техникой

Технические требования
Серверная часть (Backend):

Язык программирования: Python 3.x

Фреймворк: Flask 2.3.3

ORM: SQLAlchemy 2.0.31+, Flask-SQLAlchemy 3.0.5

База данных: PostgreSQL с драйвером psycopg2

Дополнительные библиотеки: python-dotenv 1.0.0, PyJWT, Flask-CORS

Клиентская часть (Frontend):

Технологии: HTML, CSS, JavaScript

Взаимодействие с сервером через REST API

Структура базы данных:

Таблица users:

user_id (PK, INTEGER, autoincrement)

full_name (VARCHAR(100), NOT NULL)

phone (VARCHAR(20), NOT NULL)

login (VARCHAR(50), UNIQUE, NOT NULL)

password (VARCHAR(255), NOT NULL, хешированный)

user_type (VARCHAR(50), NOT NULL)

Таблица repair_requests:

request_id (PK, INTEGER, autoincrement)

start_date (DATE, NOT NULL)

climate_tech_type (VARCHAR, NOT NULL)

climate_tech_model (VARCHAR, NOT NULL)

problem_description (TEXT, NOT NULL)

request_status (VARCHAR, NOT NULL)

completion_date (DATE, nullable)

repair_parts (TEXT, nullable)

master_id (INTEGER, FK -> users.user_id, nullable)

client_id (INTEGER, FK -> users.user_id, NOT NULL)

Требования к REST API
Эндпоинты аутентификации (/api/auth):

POST /api/auth/register - регистрация пользователя

POST /api/auth/login - вход в систему

Эндпоинты управления пользователями (/api/users):

GET /api/users/ - получение списка пользователей с пагинацией

GET /api/users/<user_id> - получение данных пользователя

POST /api/users/ - создание нового пользователя

PUT /api/users/<user_id> - обновление данных пользователя

DELETE /api/users/<user_id> - удаление пользователя

Эндпоинты управления заявками (/api/requests):

GET /api/requests/ - получение списка заявок с фильтрацией и пагинацией

GET /api/requests/<request_id> - получение информации о заявке

POST /api/requests/ - создание заявки

PUT /api/requests/<request_id> - обновление заявки

DELETE /api/requests/<request_id> - удаление заявки

Эндпоинты статистики (/api/statistics):

GET /api/statistics/completed - статистика завершенных заявок

GET /api/statistics/average-time - среднее время выполнения

GET /api/statistics/problem-types - анализ типов проблем

Требования к безопасности
Все пароли должны храниться в хешированном виде

Использование JWT-токенов для аутентификации

Проверка прав доступа через middleware на каждом защищенном эндпоинте

Валидация входных данных на стороне сервера

Защита от SQL-инъекций через использование ORM SQLAlchemy

Требования к развертыванию
Конфигурация приложения через переменные окружения (.env файл)

Поддержка запуска в режиме разработки и production

Возможность настройки хоста и порта через параметры запуска

Автоматическое создание таблиц БД при инициализации приложения
